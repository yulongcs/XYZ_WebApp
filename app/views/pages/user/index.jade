extends ../../layout

block content
  .content
    .list-item.margin-b10
      a(href="#")
        img#advancedDropzone.usercard(src="/app/assets/images/user_photo.png", alt="")
        input#hdUploadFiles(type="hidden", name="file[files]")
      span.username #{user.name}
      div.pull-right
      a(href="/user/logout").btn-green.pull-right.brs5 注销
       a.btn-green.pull-right.brs5 注册
       a.btn-green.pull-right.brs5 登录
      .clearfix
    .item-separator
    a(href="javascript:").list-item
      i.icon-release
      span 我的发布
      span.count +1
    .item-separator
    a(href="javascript:").list-item 
      i.icon-like
      span 我的收藏
      span.count +5
    .item-separator
    a(href="/user/resetpwd").list-item
      i.icon_changepassword
      span 密码修改
    .item-separator
    a(href="javascript:").list-item
      i.icon_info
      span 代卖说明
    .item-separator
    a(href="javascript:").list-item
      i.icon_safety
      span 安全攻略
    .item-separator
    a(href="javascript:").list-item
      i.icon_advice
      span 意见反馈
    .item-separator
    #modal-1.modal.fade.custom-width
      .modal-dialog(style="width: 96%")
        .alert.alert-success
          button.close(type="button", data-dismiss="modal")
            span(aria-hidden="true") &times;
            span.sr-only Close
          .clearfix
          #img-container(style="text-align: center")
            img(alt="user-image", src="/app/assets/images/user_photo.png")
  link(rel = "stylesheet", href = "/app/assets/styles/cropper.css")
  script(src = "/app/assets/scripts/cropper.min.js")
  script(type = "text/javascript").
    $(function() {
    var example_dropzone = $("#advancedDropzone").dropzone({
                paramName: "file", // defalut:"file", The name that will be used to transfer the file
                maxFilesize: 10, // MB
                url: '/projects',
                acceptedFiles: 'image/*',
                addedfile: function (file) {

                },
                uploadprogress: function (file, progress, bytesSent) {

                },
                success: function (file, tempFile) {
                     $("#img-container").html('<img alt="user-image" src="' +tempFile.path + '">');
                     $('#modal-1').modal ('show', {backdrop: 'fade'});
                     $('#img-container img').cropper({
                                 aspectRatio: aspect_ratio,
                                 resizeable: false,
                                 moveable: false,
                                 done: function(data) {
                                 
                                 }
                              });
                },
                error: function (file, msg) {

                }
            });
    var preview_size = [100, 100],
        aspect_ratio = preview_size[0] / preview_size[1];
        
        // Preview Image Setup (based on defined crop width and height
        //$("#img-preview").css({
        //  width: preview_size[0],
        //  height: preview_size[1]
        //});
    });